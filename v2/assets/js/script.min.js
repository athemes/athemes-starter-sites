"use strict";var _dcq=_dcq||[],_dcs=_dcs||{};_dcs.account=5598225,function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//tag.getdrip.com/"+_dcs.account+".js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}(),function(t){var s,e,a=t("body"),i=1,o=!1,n=function n(r,l,c){if(c++,l.length>c&&l[c]){var d=l[c].log||"",p=Math.max(5,Math.round(100/l.length*c));r.find(".atss-import-progress-label").html(d),r.find(".atss-import-progress-sublabel").html(p+"%"),r.find(".atss-import-progress-indicator").attr("style","--atss-indicator: "+p+"%;");var m=window.atss_localize.nonce,u=r.find('input[name="demo_id"]').val(),f=r.find('input[name="builder_type"]:checked').val(),v=r.find('input[name="content_type"]:checked').val(),h=r.find('input[name="atss_color_scheme"]').val(),g=r.find('input[name="atss_logo_url"]').val(),w=r.find('input[name="atss_icon_url"]').val(),b=t.extend({nonce:m,demo_id:u,builder_type:f,content_type:v,color_scheme:h,logo:g,favicon:w},l[c]);delete b.log,delete b.priority,t.post(window.atss_localize.ajax_url,b,function(t){if(t.success)t.status&&"newAJAX"===t.status&&c--,setTimeout(function(){n(r,l,c)},500);else if(t.data)r.find(".atss-import-step-error").addClass("atss-active").siblings().removeClass("atss-active"),r.find(".atss-import-error-log").html(t.data),a.removeClass("atss-import-in-progress");else{var s=window.atss_localize.i18n.import_failed;t&&(s+='<div class="atss-import-error-response">'+_.escape(t)+"</div>"),r.find(".atss-import-step-error").addClass("atss-active").siblings().removeClass("atss-active"),r.find(".atss-import-error-log").html(s),a.removeClass("atss-import-in-progress")}}).fail(function(){r.find(".atss-import-step-error").addClass("atss-active").siblings().removeClass("atss-active"),r.find(".atss-import-error-log").html(window.atss_localize.i18n.import_failed),a.removeClass("atss-import-in-progress")})}else{r.find(".atss-import-progress-label").html(window.atss_localize.i18n.import_finished),r.find(".atss-import-progress-sublabel").html("100%"),r.find(".atss-import-progress-indicator").attr("style","--atss-indicator: 100%;");var C=window.atss_localize.i18n.tweet_text.replace("{0}",i);r.find(".atss-import-finish-tweet-text").html(C),r.find(".atss-import-finish-tweet-button").attr("href","https://twitter.com/intent/tweet?text="+C),setTimeout(function(){r.find(".atss-import-step").removeClass("atss-active"),r.find(".atss-import-step-finish").addClass("atss-active"),a.removeClass("atss-import-in-progress")},250),e.addClass("atss-demo-item-imported").siblings().removeClass("atss-demo-item-imported"),clearInterval(s),i=1}o=!0};t(document).ready(function(){var r=t(".atss-notice");r.length&&r.find(".notice-dismiss").on("click",function(){r.parent().hide(),t.post(window.atss_localize.ajax_url,{action:"atss_dismissed_handler",nonce:window.atss_localize.nonce})});var l=t(".atss");if(l.length){var c,d=l.find(".atss-demo-item"),p=(l.find(".atss-import"),l.find(".atss-preview"));l.on("click",".atss-demo-preview-button",function(s){s.preventDefault();var e=t(this),i=e.closest(".atss-demo-item"),o={preview:e.attr("href"),info:i.find(".atss-demo-info").html(),actions:i.find(".atss-demo-actions").html()};if(a.hasClass("atss-preview-show"))p.find(".atss-preview-iframe").attr("src",o.preview),p.find(".atss-preview-header-info").html(o.info),p.find(".atss-preview-header-actions").html(o.actions);else{var n=wp.template("atss-preview");p.html(n(o))}a.addClass("atss-preview-show"),c=i.index(),l.trigger("atss-nav-click",[c])}),l.on("click",".atss-preview-header-arrow-prev",function(s){s.preventDefault(),t(this).hasClass("atss-disabled")||(c--,d.eq(c).find(".atss-demo-preview-button").trigger("click"))}),l.on("click",".atss-preview-header-arrow-next",function(s){s.preventDefault(),t(this).hasClass("atss-disabled")||(c++,d.eq(c).find(".atss-demo-preview-button").trigger("click"))}),l.on("click",".atss-preview-cancel-button",function(t){t.preventDefault(),a.removeClass("atss-preview-show"),p.empty()}),l.on("atss-nav-click",function(t,s){var e=l.find(".atss-preview-header-arrow-prev"),a=l.find(".atss-preview-header-arrow-next");0===s?(e.addClass("atss-disabled"),a.removeClass("atss-disabled")):d.length-1===s?(a.addClass("atss-disabled"),e.removeClass("atss-disabled")):(a.removeClass("atss-disabled"),e.removeClass("atss-disabled"))}),l.on("click",".atss-import-open-button",function(s){s.preventDefault();var i=t(this).data("demo-id"),n=t(this).data("color-scheme"),r=window.atss_localize.demos[i],c=wp.template("atss-import");r&&r.builders.length&&(e=t(this).closest(".atss-demo-item"),r.args={},r.args.demoId=i,r.args.colorScheme=n,r.args.quick=t(this).data("quick")||r.builders.length<2||!1,r.args.builder=t(this).data("builder")||r.builders[0],r.args.imported=window.atss_localize.imported||o,l.find(".atss-import").html(c(r)),a.addClass("atss-import-show"));var d=function(t){var s=document.getElementById("atss-demo-frame").contentWindow,e={command:"changeColorPalette",palette:t};s.postMessage(JSON.stringify(e),"*")},p=document.querySelectorAll(".atss-color-picker"),m=document.querySelectorAll(".atss-color-picker-input"),u=[];m.forEach(function(t,s){t.setAttribute("data-index",s),t.addEventListener("change",function(){var s=t.getAttribute("data-index");u[s]=t.value,d(u)})}),p.forEach(function(t){const s=Pickr.create({el:t.querySelector(".pickr-holder"),theme:"atss",default:t.querySelector(".atss-color-picker-input").value,sliders:"h",swatches:[],components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!0,rgba:!0,input:!0,clear:!0,save:!1}}});s.on("change",function(e){var a;1===e.a?(s.setColorRepresentation("HEX"),a=e.toHEXA().toString(0)):(s.setColorRepresentation("RGBA"),a=e.toRGBA().toString(0));var i=t.querySelector(".atss-color-picker-input");i.value=a,i.dispatchEvent(new Event("change"));var o=t.querySelector(".pcr-button");o.style.backgroundColor=a});var e=t.parentElement.parentElement.parentElement.querySelector(".atss-import-reset-button");e.addEventListener("click",function(){s.setColor(t.querySelector(".atss-color-picker-input").getAttribute("data-default"))})})});var m=function(t){var s=document.getElementById("atss-demo-frame").contentWindow,e={command:"changeLogo",logo:t};s.postMessage(JSON.stringify(e),"*")};l.on("click",".atss-media-button",function(s){var e;s.preventDefault(),e?e.open():(e=wp.media({frame:"post",state:"insert",multiple:!1}),e.on("insert",function(){var a=e.state().get("selection").first().toJSON();t(s.target).hasClass("atss-logo-upload-button")?(t(".atss-logo-upload-input").val(a.url),m(a.url)):t(".atss-icon-upload-input").val(a.url)}),e.open())}),l.on("click",".atss-import-close-button",function(t){t.preventDefault(),a.removeClass("atss-import-show")}),l.on("click",".atss-import-toggle-button",function(s){s.preventDefault(),t(this).parent().toggleClass("atss-active")}),l.on("click",".atss-import-prev-button",function(s){s.preventDefault();var e=t(this).closest(".atss-import-step");e.removeClass("atss-active"),e.prev().addClass("atss-active")}),l.on("click",".atss-import-next-button",function(s){s.preventDefault();var e=t(this).closest(".atss-import-step");e.removeClass("atss-active"),e.next().addClass("atss-active"),t(this).hasClass("atss-import-customize-button")?l.find(".atss-import-form").addClass("atss-import-form-customize"):l.find(".atss-import-form").removeClass("atss-import-form-customize");var a=l.find(".atss-import-form");if(t(this).hasClass("atss-import-save-custom-data-button")){s.preventDefault();var i=window.atss_localize.nonce,o=a.find(".atss-color-picker-input"),n=[];o.each(function(){n.push(t(this).val())});var r=a.find('input[name="atss_logo_url"]').val(),c=a.find('input[name="atss_icon_url"]').val();t.ajax({url:window.atss_localize.ajax_url,data:{action:"save_atss_custom_data",nonce:i,color_scheme:n,logo:r,favicon:c},method:"POST",success:function(t){console.log(t)},error:function(t){console.log(t)}})}}),l.on("click",".atss-import-skip-button",function(s){s.preventDefault();var e=t(this).closest(".atss-import-step");e.removeClass("atss-active"),e.next().next().addClass("atss-active")}),l.on("change",".atss-import-builder-select input",function(s){if(l.find(".atss-import-plugin-builder").addClass("atss-hidden"),l.find(".atss-import-plugin-builder input").prop("checked",!1),t(this).is(":checked")){var e=l.find(".atss-import-plugin-"+t(this).data("builder-plugin"));e.removeClass("atss-hidden"),e.find("input").prop("checked",!0)}}),l.on("click",".atss-import-with-content-type",function(){var s=!0;t(".atss-import-with-content-type").each(function(){t(this).is(":checked")||(s=!1)}),s?l.find(".atss-import-content-select").removeClass("atss-hidden"):l.find(".atss-import-content-select").addClass("atss-hidden")}),l.on("click",".atss-import-start-button",function(e){e.preventDefault();var o=l.find(".atss-import-form");if(t(this).data("subscribe")){var r=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,c=o.find(".atss-import-subscribe-field-email"),d=c.val();if(!r.test(d))return void c.addClass("atss-error").attr("placeholder",window.atss_localize.i18n.invalid_email).val("");_dcq.push(["identify",{email:d,tags:[window.atss_localize.theme_name]}])}var p=t(this).closest(".atss-import-step");p.removeClass("atss-active"),p.next().addClass("atss-active");var m=[],u=o.find("input[data-action]");u.each(function(s){(t(this).is(":checked")||t(this).is('[type="hidden"]'))&&m.push(t(this).data())}),m=m.sort(function(t,s){return t.priority-s.priority}),i=1,s=setInterval(function(){i++},1e3),a.addClass("atss-import-in-progress"),n(o,m,-1)})}})}(jQuery);